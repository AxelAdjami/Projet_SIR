<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Partage d'écran WebRTC</title>
  <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
  <link rel="stylesheet" href="/main.css">
</head>
<body>
  <div class="container">
    <h1>Partage d'écran</h1>
    <p id="roleInfo">Initialisation en cours...</p>

    <div class="main-layout">
      <!-- Colonne gauche : écran local (caché via CSS) -->
      <div class="col">
        <div class="video-card video-card-local">
          <h2>Mon écran</h2>
          <small>Prévisualisation locale du partage.</small>
          <video id="localVideo" autoplay muted playsinline></video>
        </div>
      </div>

      <!-- Colonne droite : écran distant + infos -->
      <div class="col">
        <div class="video-card">
          <h2>Écran distant</h2>
          <small>L’écran partagé apparaîtra ici.</small>
          <video id="remoteVideo" autoplay playsinline></video>
          <p class="video-actions">
            <button id="fullscreenBtn" class="secondary-btn">Plein écran</button>
          </p>
        </div>

        <div class="info-card">
          <p class="id-row">
            <span class="id-label">Mon identifiant :</span>
            <span id="clientId">–</span>
          </p>
          <p id="linkInfo"></p>

          <p class="controls">
            <button id="shareBtn" class="primary-btn">Partager mon écran</button>
            <button id="hangupButton" class="secondary-btn" disabled>
              Arrêter la connexion
            </button>
          </p>

          <p class="bandwidth-row">
            Limite de débit vidéo :
            <select id="bandwidth">
              <option value="unlimited" selected>illimité</option>
              <option value="2000">2000 kbps</option>
              <option value="1000">1000 kbps</option>
              <option value="500">500 kbps</option>
              <option value="250">250 kbps</option>
              <option value="125">125 kbps</option>
            </select>
          </p>

          <p id="connectionState" style="display:none;">
            Connexion établie avec le correspondant.
          </p>
        </div>
      </div>
    </div>
  </div>

  <script src="/main.js"></script>
</body>
</html>
